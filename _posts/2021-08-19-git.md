---
title: "Git이란"

categories:
  - git

tags:
  - git
  - dev
  
toc: true
toc_sticky: true
---
<현재 작성 중인 페이지입니다!!>

<br>
## Git이란
Git이란 **분산시스템을 기반으로한 형상관리도구**입니다. 

Git을 공부하다보면 처음에는 "Git을 대체 왜 사용하는가"에 대한 의문을 가질 수 있습니다. 특히, 회사에 다녀보지 않았거나 큰 프로젝트를 진행해보지 못한 경우에는 더욱 그렇게 생각하실 수 있을 것 같습니다. 하지만, 프로젝트가 극단적으로 크다고 가정했을 경우 Git이란 협업을 가능하게 해주고 버전관리를 쉽게 해주는 유용한 도구입니다. 예를 들면[리눅스 프로젝트](https://github.com/torvalds/linux)를 예시로 들 수 있습니다. 이런 엄청나게 큰 프로젝트를 일일히 작성하고 관리하는 것은 더욱 어려운 일입니다. 이런 문제를 해결하기 위해 나온 것이 Git이라고 생각하면 될 것 같습니다.

Git을 처음 접해보는 분들께 저의 경험을 이야기해보자면, 저도 대학교 1년때 과제를 Git에 올리라는 이야기를 듣고 Git이 어떤 건지 이해를 못해서 과제 제출을 위한 명령어 순서를 외워서 올렸던 기억이 있습니다. git 명령어는 뭔지..어떤게 있는지 어려웠던 기억이 있네요. 요즘에는 Vscode, Source Tree, Gitkraken과 같이 git을 위한 좋은 gui 툴을 사용하면 되지만, 그 당시에는 지식이 부족하여 많이 헤맸습니다. (사실 1학년 지나고도 모르겠어서 git 공부만 여러 번 했던 것 같습니다...)

## Repository

이제 본격적으로 Git이 무엇인지 살펴봅시다. Git에는 **저장소**라는 것이 있고, 이 저장소에는 히스토리, 소스코드, 소스코드의 브랜치, 프로그램의 여러 버전 등을 저장할 수 있습니다. Repository는 아래와 같이 2가지 종류가 있습니다. 

**Remote Repository**
- 파일이나 소스를 원격 저장 공간에 저장 및 관리하는 곳으로 여러 사용자가 공유하기 위한 저장소
- git server program이라고 생각

**Local Repository**
- 사용자의 PC에 파일이 저장되는 개인 저장소
- git client program이라고 생각

이렇게 로컬 저장소(Local Repository)와 원격 저장소(Remote Repository)에서 소스코드 버전관리를 할 수 있기 때문에 작업하기 빠르다는 장점이 있고, 로컬 혹은 원격저장시스템에 문제가 생겨도 쉽게 대응할 수 있습니다.

<center><img src="/assets/images/2021-08-19-git/git-img1.png"></center>

Git을 멀리서 보면 위의 이미지와 같이 요약할 수 있습니다. 흔히들 서버라고 부르는 원격저장소를 통해 소스코드를 저장, 버전 관리 등을 하고, 만약 사용자가 소스코드나 어떤 상태의 버전을 가지고 오고 싶다고 하면 `git clone` 혹은 `git pull`이라는 명령어를 통해서 원격저장소에 있는 소스코드들을 로컬 저장소로 가지고 올 수가 있습니다 (두 명령어의 차이는 밑에서 설명할 예정입니다.). 반대로 로컬 저장소에 있는 소스코드나 파일을 원격 저장소에 저장하고 싶다면 `git push`를 통해 원격 저장소에 저장할 수 있습니다. 이렇게 로컬저장소에서 작업한 코드들을 원격 저장소에 저장할 수 있고, 다른 사람들이 작성한 코드를 원격 저장소에 저장해두면 받아올 수도 있습니다. 

`git clone`과 `git pull`의 차이점에 대해 더 알아봅시다. 

### clone ###

`git clone [URL]`를 통해 원격 저장소에 있는 모든 내용을 복사할 수 있습니다. clone을 하게 되면 자동적으로 내 로컬저장소를 생성하고 로컬 저장소를 url의 원격저장소와 연결하게 됩니다. 여기서 주의해야할 점 중 하나는 URL이란 보통 웹사이트의 주소가 아닌 아래의 이미지와 같이 원격 저장소의 주소를 가져와야합니다. 보통 github 페이지의 웹 상단에 보이는 주소는 원격저장소를 보여주기 위한 주소이기 때문에 원격 저장소의 주소와 다릅니다.

<center><img src="/assets/images/2021-08-19-git/git-img2.png" width=400></center>

### pull ###

pull이란 원격저장소에 소스코드의 최신 버전을 다운로드해서 내 로컬 저장소에다가 내용을 적용하는 것입니다.
그렇기 때문에 이미 로컬저장소가 있는 상태에서 사용합니다. 만약 로컬저장소가 없다면 아래와 같이 설정하면 됩니다. 

```
git init # 로컬 저장소 생성
git remote add origin [URL] # 로컬 저장소를 원격 저장소와 연결
git pull origin main # 원격 저장소에 있는 파일들을 가져옴
```

먼저 `git init`을 통해 내 컴퓨터에 로컬 저장소를 만들수 있습니다. 이후, `git remote add orgin [URL]`을 통해 origin이라는 이름을 가진 git 서버와 연결합니다. 이후 `git pull origin main`이라는 명령어를 통해 origin 서버의 내용들을 main 브랜치(지금은 client 서버로 생각해도 됩니다.)로 가지고 옵니다. 사실 `git pull`이라는 명령어는 자세히 보면 `git fetch`와 `git merge` 명령어를 합친 것이라고 생각하면 되는데, 이에 대해서는 나중에 다시 설명할 예정입니다. 

### Origin, Main

명령어 예시에 origin과 main이 무엇인지 간단하게 알아봅시다.
보통 원격저장소를 생성하면 **origin**이라는 별칭이 붙고, 기본적으로 생성되는 초기 브랜치의 이름은 **main**으로 설정됩니다. (예전에는 초기 상태 브랜치가 master였지만 2020년 10월 이후 main으로 변경됐다고 합니다.) 브랜치라는 것은 내가 현재 작업하고 있는 공간이라고 생각하시면 됩니다. 

## 로컬 저장소에 파일 업로드하기(Commit)
로컬 저장소에 내가 현재 작업하고 있는 소스 코드들을 저장을 하기 위해서는 working tree, staging area, commit이 무엇인지 알아야합니다. 아래의 이미지를 보면 파일을 올리기 위해서는 3가지 과정이 필요합니다.
1. 내가 현재 작업하고 있는 곳(Working Tree)에서 파일들을 수정합니다.
2. 로컬 저장소에 저장하기 위한 공간(Staging Area)에 저장합니다.
3. 이 공간에 있는 파일들을 로컬 저장소에 올립니다. (Commit 작업)

이렇게 3가지의 과정을 통해 로컬 저장소에 파일들을 올릴 수 있습니다. 

<center><img src="/assets/images/2021-08-19-git/git-img3.png"></center>

### Working Tree

Working Tree란 **저장소의 어느 한 시점으로부터 사용자가 현재 작업하는 시점/공간**을 이야기합니다. 즉, 내가 어떤 버전의 프로그램의 소스코드들을 작성하고 있고, 그 때 내가 작업하는 파일 디렉토리라고 생각하시면 됩니다. `git status`라는 명령어를 통해 현재 working tree의 수정된 파일들과 staging area에 있는 파일의 상태를 볼 수 있습니다.

### Staging Area

Staging Area란 **원격 저장소에 Commit하기 전에 Commit을 준비하는 공간**이고, 인덱스라고도 합니다.
`git add` 명령어를 사용해서 원하는 파일들을 **staging area**로 보낼 수 있습니다.

파일 별로 추가: `git add {file_name}`

모든 파일 추가: `git add .`

모든 파일 add 취소: `git reset HEAD` 

파일별로 add 취소:  `git reset HEAD {file_name}` 

### Commit

Commit이란 **변경된 사항을 확정하고 저장소에 저장하는 작업**입니다. 각 커밋마다 알파벳, 숫자로 이루어진 40자리 고유 이름이 생성되고 이를 사용해서 이전 버전으로 확인, 복구 등의 작업을 할 수 있습니다. `git commit` 또는 `git commit -m [message]`라는 명령어를 통해 내가 커밋할 내용에 대한 메세지를 작성(예. file.py를 수정했습니다)하고 로컬 저장소에 저장할 수 있습니다.

#### Commit Message 작성
다른 사람과 같이 작업을 하는 경우에는 협업 효율을 위해 좋은 커밋 메세지를 적는 방법도 중요합니다. 보통 `git commit -m [message]`를 통해서 간단하게 메세지를 적을 수도 있지만, `git commit` 후 더 자세한 commit message 작성할 수 있습니다.
좋은 커밋 메세지를 적는 방법은 [이 링크](https://meetup.toast.com/posts/106)를 통해 더욱 자세히 볼 수 있습니다.
또한, 예시로 [이 링크](https://github.com/facebookresearch/detectron2/commit/cd60faf1427f95d357ba30365a415d0309a8618f)를 통해 Facebook AI 팀에서는 어떤 방식으로 메세지를 올리는지 확인해볼 수 있습니다. 


### Git의 파일 관리
로컬 저장소에서 파일 관리는 아래와 같이 3가지의 상태로 나타낼 수 있습니다.

1. Modified: 로컬에서 작업한 후 변경된 내용
2. Committed: 로컬에서 작업한 후 로컬 저장소에 저장된 상태
3. Staged: Modified하여 곧 Commit이 될 파일들

### Head

<!-- 현재 작업중인 Branch를 가리킨다. -->


### Branch
<!-- 
- 작업을 할때 다른 가지에서 새로운 가지를 치고(현재 상태를 복사) 생성한 브랜치에서 작업 후 다른 브랜치랑 Merge를 하는 방식으로 작업을 한다.
- 보통 개발 브랜치, feature 브랜치 등으로 나누어서 통합하고 메인 브랜치에 통합하는 방식으로 진행된다.

브랜치 생성: `git branch {생성할 브랜치 이름}`

브랜치 변경: `git checkout {이동할 브랜치 이름}`

로컬 저장소의 브랜치 확인:  `git branch`

원격 저장소의 브랜치 확인:  `git branch -r`

모든 브랜치 확인:  `git branch -a`

원격 저장소의 브랜치 가져오기&가져온 브랜치로 브랜치 변경: `git checkout -t {원격 저장소의 브랜치}`
 -->

## Merge


## Git Flow

Git에 대해 조금 더 알아봅시다. Git을 과연 어떻게 효율적으로 사용할 수 있을까에 대한 고민을 하실 수 있을 겁니다. 만약 이게 간단한 프로젝트라면 그냥 혼자서 파일을 업로드하고 수정하면 되지만, 많은 사람이 함께 기능들을 개발하는 경우에는 브랜치를 어떻게 생성하고 개발할지에 대한 고민을 할 수 있을 겁니다. 이를 위한 Git을 잘 사용하는 전략인 Git Flow를 살펴볼 수 있습니다. Git Flow란 Git으로 협업할 때, 브랜치 전략이라고 할 수 있습니다.

예시를 살펴보면 "우아한 형제들"에서 사용하는 Git Flow를 보면 이해가 되실 거라고 생각합니다.

예시) [우아한 형제들 Git Flow](https://woowabros.github.io/experience/2017/10/30/baemin-mobile-git-branch-strategy.html)

## Reference
- NAVER AI Boostcamp의 이고잉님의 특강
- 내 머릿속과 노트